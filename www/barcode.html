<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ترازوی هوشمند </title>
   <link rel="stylesheet" href="/style.css">
   <link rel="stylesheet" href="/icons.css">

</head>
<body>
  
  <p style="text-align: center;">
    <img src="logo.png" alt="راهکارسازان آوان" style="width:200px">
      </p>
    
    
      <img src="line.png" style="width:300px"><br/>
    
<img src="data:image/png;base64,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">
<br>

  <span  class="city" id="city">Rj</span> 

<h1 id="barcode" class="barcode">0000000000000000</h1> 
 <h1 class="weight" id="weight">0kg</h1>

 <img src="line.png" style="width:300px"><br/><br/>

 <a href='/'  class='button-54'  style="  background-color: #ffffff  !important;" >بازگشت </a>
  

<script>



let last_barcode = 'not set'
let last_weight = 0.0


async function get_data(){
  let url = '/getdata';

      fetch(url)
      .then(res =>  res.json())
      .then(result =>{
          let barcode = document.getElementById('barcode');
          let weight = document.getElementById('weight');
          let city = document.getElementById('city');

          if(result && ((result.barcode != last_barcode && result.barcode.length>0) ||
                       (result.weight != last_weight )))
          
          {
            barcode.innerHTML = result.barcode;
            switch(result.city.toLowerCase()){
            case 'tehran':
                 city.innerHTML = 'تهران';break;
            case 'providence':
                 city.innerHTML = 'شهرستان';break;
            case 'rejected':
                 city.innerHTML = 'بدون هویت';break;
            case 'connection error':
                 city.innerHTML = 'خطای سیستمی';break;

            }
            weight.innerHTML = result.weight +'kg';
            last_barcode = result.barcode;
            last_weight = result.weight;
        }
      })
      .catch(err => console.log(err));
  }


  setInterval(get_data, 500);

</script>

</body>
</html>